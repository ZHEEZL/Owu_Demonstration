<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=auto">
    <title>{{ video.title }} - Owu</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css"/>
    <style>
        /* –í–∞—à–∏ —Å—Ç–∏–ª–∏ */
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 4% 10vh;
            gap: 20px;
        }

        .plyr{
        border-radius: 10px
        }

        .video-player {
            flex: 1 1 60%;
            min-width: 300px;
            box-sizing: border-box;
            padding: 20px;
        }

        .video-player video {
            width: 100%;
            height: auto;
            max-height: 100%;
        }

        .video-info {
            margin-top: 15px;
        }

        .video-info h2 {
            margin-bottom: 10px;
            font-size: 20px;
        }

        .video-info p {
            margin: 5px 0;
            color: #777;
        }

        .video-info .author-info {
            font-size: 14px;
            color: #555;
        }

        .actions {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .actions button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 18px;
            color: #555;
            margin-right: 20px;
        }

        .actions button:hover {
            color: #000;
        }

        .video-description {
            margin-top: 20px;
            background-color: #fff;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .video-description h4 {
            margin: 0 0 0.5%;
        }

        .video-description p {
            margin: 0;
            white-space: pre-line; /* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–µ—Ä–µ–≤–æ–¥ —Å—Ç—Ä–æ–∫ –∏ –ø—Ä–æ–±–µ–ª—ã */
        }

        .video-description a {
            color: #1a73e8; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è —Å—Å—ã–ª–æ–∫ */
            text-decoration: underline; /* –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ */
        }

        .video-description a:hover {
            color: #0c63e4; /* –ë–æ–ª–µ–µ —Ç–µ–º–Ω—ã–π —Å–∏–Ω–∏–π —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
            text-decoration: underline; /* –ü–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        }

        .suggested-videos {
            flex: 1 1 35%;
            min-width: 300px;
        }

        .suggested-videos h3 {
            margin-bottom: 15px;
        }

        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
        }

        .video-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            background-color: #fff;
            padding: 7px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }
        .video-item img {
            width: 100%;
            height: 100%; /* Set a fixed height for images */
            object-fit: cover; /* Ensures the image covers the space without distortion */
            border-radius: 8px
        }

        .video-item div {
            display: flex;
            flex-direction: column;
        }

        .video-item h3 {
            margin: 0 0 4px 0;
            font-size: 16px;
            line-height: 1.2;
            color: #181818;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .video-item h4 {
    margin: 0;
    margin-top: -5px;
    font-size: 15px;
    padding: 4px 10px;
    color: #0f0f0f;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: normal; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
    line-height: 1.2; /* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–∂—Å—Ç—Ä–æ—á–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ */
    display: -webkit-box; /* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞ */
    -webkit-line-clamp: 2; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–≤—É–º—è —Å—Ç—Ä–æ–∫–∞–º–∏ */
    -webkit-box-orient: vertical; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –æ–±—Ä–µ–∑–∫–∏ */
}

.video-item p {
    margin: 0px;
    padding: 0px 10px;
    color: #0f0f0f;
    font-size: 14px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: normal; /* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
    line-height: 1.2; /* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–µ–∂—Å—Ç—Ä–æ—á–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ */
    display: -webkit-box; /* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–µ–∑–∫–∏ —Ç–µ–∫—Å—Ç–∞ */
    -webkit-line-clamp: 1; /* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π */
    -webkit-box-orient: vertical; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –æ–±—Ä–µ–∑–∫–∏ */
}

        .video-item span {
            font-size: 12px;
        }

        a {
            text-decoration: none;
            color: inherit; /* –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }

        /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã */
        @media screen and (max-width: 980px) {
            .main-content {
                padding: 10% 5vh;
            }

            .video-player {
                flex: 1 1 100%;
                height: auto;
            }

            .suggested-videos {
                flex: 1 1 100%;
            }

            .video-info {
            margin-left: 1vw;
            }
        }

        @media only screen and (max-device-width: 812px) and (orientation: portrait) {
          .plyr--fullscreen-active video {
            transform: rotate(-90deg) scale(1.33);
          }
        }

        @media screen and (max-width: 768px) {
        .plyr__volume {
            display: none !important;
        }
        .container {
            flex-direction: column;
        }

        header {
            flex-wrap: wrap;
        }

        aside {
            display: none;
        }
        .main-content {
            flex-direction: column;
            margin-left: 0px;
            margin-top: 8vh;
            padding: 0px 0px 0px;
        }

        .video-player,
        .suggested-videos {
            flex: 1 1 100%;
            padding: 10px;
        }

        .video-description {
            padding: 10px;
        }

        .video-item div {
            margin-left: 0;
        }
        }

        @media screen and (max-width: 480px) {
            header {
                align-items: center;
            }
            .video-player {
                padding: 5px;
            }

            .nav-buttons {
                display: none;
            }

            .category-tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }

            .category-tabs button {
                display: inline-block;
                margin-right: 10px;
            }

            .suggested-videos {
                padding: 5px;
            }

            .video-item {
                padding: 5px;
            }

            .actions button {
                font-size: 16px;
            }
        }
        .hide-cursor {
                cursor: none;
            }
    </style>
</head>

<body>
<div class="header">
    <header>
        <a href="{{ url_for('home') }}">
            <div class="logo">Owu <span>Alpha</span></div>
        </a>
        <form id="search-form" method="GET" action="{{ url_for('home') }}">
            <input type="text" id="search-input" name="query" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å"
                   value="{{ request.args.get('query', '') }}">
            <button type="submit">–ü–æ–∏—Å–∫</button>
        </form>
        <div class="nav-buttons">
            {% if current_user.is_authenticated %}
            <button onclick="redirectToUrl('{{url_for('upload')}}')">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ</button>
            {% endif %}
            <div class="profile-button" onclick="toggleMenu()">
                <img src="{{ url_for('static', filename='avatars/' + (current_user.avatar_filename if current_user.avatar_filename else 'def-avatar.png')) }}"
                     alt="{{ current_user.username }}" class="profile-button">
            </div>

            <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é -->
            <div id="profile-menu" class="profile-menu">
                {% if current_user.is_authenticated %}
                <div class="profile-header">
                    <img src="{{ url_for('static', filename='avatars/' + (current_user.avatar_filename if current_user.avatar_filename else 'def-avatar.png')) }}"
                         alt="{{ current_user.username }}">
                    <div class="profile-info">
                        <span>{{ current_user.username }}</span>
                    </div>
                    <a href="{{ url_for('view_channel', user_id=current_user.id) }}" style="margin-left: 10px">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å
                        –∫–∞–Ω–∞–ª</a>
                </div>
                <hr>
                <a href="{{ url_for('logout') }}"><i class="icon-logout"></i> –í—ã–π—Ç–∏</a>
                <hr>
                <dialog id="myDialog">
                    <p>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.</p>
                    <button id="closeDialogButton">–ó–∞–∫—Ä—ã—Ç—å</button>
                </dialog>
                <a href="#"><i class="icon"></i> –¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è Owu</a>
                <hr>
                <a href="#"><i class="icon"></i> –¢–µ–º–∞: —Å–≤–µ—Ç–ª–∞—è</a>
                <a href="#"><i class="icon"></i> –Ø–∑—ã–∫: –†—É—Å—Å–∫–∏–π</a>
                <a href="#"><i class="icon"></i> –°—Ç—Ä–∞–Ω–∞: –†–æ—Å—Å–∏—è</a>
                {% else %}
                <div class="profile-header">
                    <img src="{{ url_for('static', filename='avatars/' + 'def-avatar.png') }}">
                    <div class="profile-info">
                        <span>–ì–æ—Å—Ç—å</span>
                    </div>
                </div>
                <hr>
                <a href="{{ url_for('login') }}"><i class="icon-login"></i> –í–æ–π—Ç–∏</a>
                <a href="{{ url_for('register') }}"><i class="icon-register"></i> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
            </div>
        </div>
    </header>
</div>

<div class="main-content">
    <div class="video-player">
        <video id="player" controls crossorigin playsinline autoplay>
            {% for quality, source in available_qualities.items() %}
            <source src="{{ source }}" type="video/mp4" size="{{ quality[:-1] }} ">
            {% endfor %}
        </video>
        <div class="video-info">
            <h2 id="video-title">{{ video.title }}</h2>
            <div class="video-channel-info">
                <a class="video-channel-info" href="{{ url_for('view_channel', user_id=video.user.id) }}">
                    <img src="{{ url_for('static', filename='avatars/' + (video.user.avatar_filename if video.user.avatar_filename else 'def-avatar.png')) }}"
                         alt="{{ video.user.username }}" class="channel-avatar">
                    <div class="channel-details"
                         onclick="redirectToUrl('{{ url_for('view_channel', user_id=video.user.id) }}')">
                        <h3 class="author-info">{{ video.user.username }}</h3>
                        <p class="video-stats"><span id="subscriber-count">{{ video.user.subscribers_count() }}</span>
                            –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤</p>
                    </div>
                </a>
                <button class="subscribe-button {{ 'subscribed' if not current_user.is_anonymous and current_user.is_subscribed(video.user) else '' }}"
                        onclick="toggleSubscribe({{ video.user.id }})">
                    {{ '–û—Ç–ø–∏—Å–∞—Ç—å—Å—è' if not current_user.is_anonymous and current_user.is_subscribed(video.user) else
                    '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è' }}
                </button>
            </div>
            <div class="actions">
                <button onclick="likeVideo('{{ video.video_id }}')">üëç <span id="likes-count">{{ video.likes }}</span>
                </button>
            </div>
        </div>
        <div class="video-description">
            <h4 id="views-count">{{ video.views }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Ä¢ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: {{ video.formatted_upload_date }}</h4>
            <p>{{ video.description | urlize | safe }}</p>
        </div>
    </div>
    <div class="suggested-videos">
        <h2>–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ</h2>
        {% for suggested_video in suggested_videos %}
        <div class="video-item"
             onclick="redirectToUrl('{{ url_for('view_video', video_id=suggested_video.video_id) }}')">
            <div class="thumbnail-container-s">
                <img src="{{ url_for('static', filename='thumbnails/' + suggested_video.thumbnail_filename) }}"
                     alt="thumbnail">
                <span class="video-duration-s">{{ suggested_video.duration }}</span>
            </div>
            <div>
                <h4>{{ suggested_video.title }}</h4>
                <p>{{ suggested_video.user.username }}</p>
                <p>{{ suggested_video.views }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ ‚Ä¢ {{ suggested_video.formatted_upload_date }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.js"></script>
<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Plyr
    const player = new Plyr('#player');
    player.on('ended', () => {
        const firstSuggestedVideo = document.querySelector('.video-item');
        if (firstSuggestedVideo) {
            const videoUrl = firstSuggestedVideo.getAttribute('onclick').match(/'(.*?)'/)[1];
            window.location.href = videoUrl; // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –ø–µ—Ä–≤—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        }
    });

    window.player = player;

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
    player.on('autoplay', () => {
        incrementViews();
    });

    player.on('enterfullscreen', () => {
          if (screen.orientation && screen.orientation.lock) {
            screen.orientation.lock('landscape').catch((error) => {
              console.error('–û—à–∏–±–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏:', error);
            });
          }
        });

        player.on('exitfullscreen', () => {
          if (screen.orientation && screen.orientation.unlock) {
            screen.orientation.unlock();
          }
        });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
    function incrementViews() {
        fetch('/update_views', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ video_id: '{{ video.video_id }}' })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                views++; // –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                document.getElementById('views-count').textContent = views + ' –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤';
            }
        })
        .catch(error => console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:', error));
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ª–∞–π–∫–∞ –≤–∏–¥–µ–æ
    function likeVideo(videoId) {
        fetch(`/like/${videoId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∞–π–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                document.getElementById('likes-count').textContent = data.new_likes_count;
            } else {
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫');
            }
        })
        .catch(error => console.error('–û—à–∏–±–∫–∞:', error));
    }

    function redirectToUrl(url) {
        window.location.href = url;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
    function toggleSubscribe(userId) {
        const subscribeButton = document.querySelector('.subscribe-button');
        const isSubscribed = subscribeButton.classList.contains('subscribed');

        // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
        subscribeButton.textContent = isSubscribed ? '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è' : '–û—Ç–ø–∏—Å–∞—Ç—å—Å—è';
        subscribeButton.classList.toggle('subscribed');

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å
        const url = isSubscribed ? `/unsubscribe/${userId}` : `/subscribe/${userId}`;
        fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const subscriberCountElement = document.getElementById('subscriber-count');
                subscriberCountElement.textContent = data.new_subscribers_count;
            } else {
                alert(data.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞');
                // –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–µ —É–¥–∞–ª—Å—è, –≤–µ—Ä–Ω—É—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
                subscribeButton.textContent = isSubscribed ? '–û—Ç–ø–∏—Å–∞—Ç—å—Å—è' : '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è';
                subscribeButton.classList.toggle('subscribed');
            }
        })
        .catch(error => {
            console.error('–û—à–∏–±–∫–∞:', error);
            // –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –≤–µ—Ä–Ω—É—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            subscribeButton.textContent = isSubscribed ? '–û—Ç–ø–∏—Å–∞—Ç—å—Å—è' : '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è';
            subscribeButton.classList.toggle('subscribed');
        });
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –≤–∏–¥–µ–æ
    function selectVideo(videoSrc, title, viewCount, author, uploadDate) {
        const currentTime = player.currentTime; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –ø–µ—Ä–µ–¥ –≤—ã–±–æ—Ä–æ–º –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ
        player.source = {
            type: 'video',
            sources: [{
                src: videoSrc,
                type: 'video/mp4'
            }]
        };
        player.once('loadeddata', () => {
            player.currentTime = currentTime; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
            player.play(); // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
        });
        document.getElementById('video-title').textContent = title;
        document.getElementById('views-count').textContent = viewCount;
        document.querySelector('.author-info').textContent = `–ê–≤—Ç–æ—Ä: ${author} ‚Ä¢ –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${uploadDate}`;
    }
    document.addEventListener('keydown', (event) => {
        const seekTime = 10; // –í—Ä–µ–º—è –ø–µ—Ä–µ–º–æ—Ç–∫–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

        switch (event.key) {
            case 'j': // –ü–µ—Ä–µ–º–æ—Ç–∫–∞ –Ω–∞–∑–∞–¥ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
                player.currentTime = Math.max(player.currentTime - seekTime, 0);
                break;
            case 'l': // –ü–µ—Ä–µ–º–æ—Ç–∫–∞ –≤–ø–µ—Ä–µ–¥ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
                player.currentTime = Math.min(player.currentTime + seekTime, player.duration);
                break;
            case 'ArrowLeft': // –ü–µ—Ä–µ–º–æ—Ç–∫–∞ –Ω–∞–∑–∞–¥ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥
                player.currentTime = Math.max(player.currentTime - 5, 0);
                break;
            case 'ArrowRight': // –ü–µ—Ä–µ–º–æ—Ç–∫–∞ –≤–ø–µ—Ä–µ–¥ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥
                player.currentTime = Math.min(player.currentTime + 5, player.duration);
                break;
        }
    });

    function toggleMenu() {
const menu = document.getElementById('profile-menu');
menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
}

document.addEventListener('click', function(event) {
const isClickInside = document.querySelector('.profile-button').contains(event.target);
const menu = document.getElementById('profile-menu');
if (!isClickInside) {
    menu.style.display = 'none';
}
});

    const myDialog = document.getElementById('myDialog');
    const closeDialogButton = document.getElementById('closeDialogButton');

    // –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
    document.querySelectorAll('.icon').forEach(item => {
        item.addEventListener('click', (event) => {
            event.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ
            myDialog.showModal();   // –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ
        });
    });

    // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –¥–∏–∞–ª–æ–≥–∞
    closeDialogButton.addEventListener('click', () => {
        myDialog.close(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ
    });

    const playerContainer = document.querySelector('.video-player');

let hideControlsTimeout;

function hideControlsAndCursor() {
    playerContainer.classList.add('hide-cursor');
    player.elements.controls.style.opacity = '0';
}

function showControlsAndCursor() {
    clearTimeout(hideControlsTimeout);
    playerContainer.classList.remove('hide-cursor');
    player.elements.controls.style.opacity = '1';

    hideControlsTimeout = setTimeout(hideControlsAndCursor, 3000);
}

// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
playerContainer.addEventListener('mousemove', showControlsAndCursor);
playerContainer.addEventListener('mouseleave', hideControlsAndCursor);

// –ù–∞—á–∏–Ω–∞–µ–º —Å –ø–æ–∫–∞–∑–∞ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
showControlsAndCursor();
</script>
</body>

</html>